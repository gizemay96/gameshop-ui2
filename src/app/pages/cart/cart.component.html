<div class="profile-page">
  <div class="page-body row w-100">

    <mat-stepper linear #stepper>

      <!-- Order Step -->
      <mat-step>
        <ng-template matStepLabel>Order</ng-template>
        <div class="order-tab row w-100 ">
          <div class="order-side col-lg-7 col-md-12">

            <!-- Cart Products -->
            <div class="product row" *ngFor="let item of userCart$.products">
              <div class="img col-xl-3 col-lg-4 p-0">
                <img class="" [src]="item.product.image" alt="">
              </div>
              <div class="info-case col-xl-9 col-lg-8">
                <div class="order-info">
                  <div class="product-name">$ {{item.product.title}}</div>
                  <div class="product-price">$ {{item.product.price}}</div>
                  <div class="add-remove row">
                    <div class="decrement col-4 row-reset" (click)="deleteProduct(item)">
                      <img *ngIf="item.totalQty === 1" src="../../../assets/icons/orange-trash.png" alt="">
                      <span *ngIf="item.totalQty > 1"> - </span>
                    </div>
                    <div class="count col-4 row-reset"> {{item.totalQty}} </div>
                    <div class="increment col-4 row-reset" (click)="addToCart(item)">
                      <img src="../../../assets/icons/plus.png" alt="">
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <div class="payment-side col-lg-5 col-md-12">
            <!-- User Addresses -->
            <div class="addresses">
              <div class="inputs" *ngFor="let address of userAddresses$">
                <div class="input-name">{{address.title}}</div>
                <div class="input">
                  {{ address.building | titlecase }} , {{ address.street | titlecase}} ,
                  {{ address.city | titlecase}} / {{ address.country | titlecase}}
                </div>
                <div class="radio-btn">
                  <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
                    [(ngModel)]="selectedAddress">
                    <mat-radio-button class="example-radio-button" [value]="address">
                    </mat-radio-button>
                  </mat-radio-group>
                </div>
              </div>
            </div>

            <!-- Total Info -->
            <div class="total-info">
              <div class="total-card">
                <div class="texts">
                  <div class="total-item">
                    <div class="total-price">${{userCart$.totalPrice | number:'1.2-2'}} </div>
                    <div class="total-count">{{userCart$.totalQty}} Items</div>
                  </div>
                  <div class="total-item">
                    <div class="price">$ {{12 | number:'1.2-2'}} </div>
                    <div class="delivery">Delivery</div>
                  </div>
                </div>
                <div class="buttons d-flex">
                  <span class="total-price col-6">$ {{userCart$.totalPrice + 12 | number:'1.2-2'}}</span>
                  <span class="goto-payment col-6" (click)="goToNextStep()">Go to payment
                    <img src="../../../assets/icons/fluent_payment-28-filled.svg" alt="">
                    <img src="../../../assets/icons/arrow-rigth.png" alt="">
                  </span>
                </div>
              </div>
            </div>

          </div>
        </div>
      </mat-step>

      <!-- Payment Step -->
      <mat-step>
        <ng-template matStepLabel>Payment</ng-template>
        <div class="payment-page row">
          <div class="card-side col-5">
            <div class="credit-card ">
              <img src="../../../assets/img/Group 189.png" alt="">
              <div class="credit-card-info">
                <div class="card-number">
                  {{paymentForm.get('cardNumber')?.value || '0000 0000 0000 0000' | mask: '0000 0000 0000 0000'}}
                </div>
                <div class="date">
                  <img src="../../../assets/icons/right_arrow.svg" alt="">
                  {{paymentForm.get('expDate')?.value || '00/00' | mask: '00/00'}}
                </div>
                <div class="name">
                  {{paymentForm.get('cardName')?.value || 'Card Name' | uppercase}}
                </div>
              </div>
            </div>
          </div>
          <div class="payment-form col-6">
            <form [formGroup]="paymentForm" (submit)="payment()" id="fillOrange">
              <!-- E-mail -->
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>CARD NUMBER</mat-label>
                <input matInput mask="0000 0000 0000 0000" formControlName="cardNumber" type="text" class="w-100"
                  autocomplete="off">
              </mat-form-field>

              <!-- Password -->
              <mat-form-field appearance="fill" class="w-100">
                <mat-label>CARDHOLDER NAME</mat-label>
                <input matInput mask="S* S*" type="text" class="w-100" formControlName="cardName"
                  autocomplete="new-password">
              </mat-form-field>

              <div class="date-cvv row">
                <!-- E-mail -->
                <mat-form-field appearance="fill" class="col-6">
                  <mat-label>EXPIRY DATE</mat-label>
                  <input matInput [showMaskTyped]="true" mask="00/00" formControlName="expDate" type="text"
                    class="w-100" autocomplete="off">
                </mat-form-field>

                <!-- Password -->
                <mat-form-field appearance="fill" class="col-6">
                  <mat-label>CVV</mat-label>
                  <input matInput mask="000" [showMaskTyped]="true" formControlName="cvv" type="text" class="w-100"
                    autocomplete="new-password">
                </mat-form-field>
              </div>

              <button type="submit" class="btn bg-orange w-100 btn-orange">Pay</button>
            </form>
          </div>
        </div>
      </mat-step>

      <!-- Success Message -->
      <mat-step>
        <ng-template matStepLabel>Done</ng-template>
        <p>You are now done.</p>
        <div>
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button (click)="stepper.reset()">Reset</button>
        </div>
      </mat-step>

    </mat-stepper>

  </div>
</div>